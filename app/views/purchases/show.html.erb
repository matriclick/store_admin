<%- model_class = Purchase -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:payment_method_id) %>:</strong></dt>
  <dd><%= @purchase.payment_method.name unless @purchase.payment_method.nil? %></dd>
  <dt><strong><%= model_class.human_attribute_name(:supplier_account_id) %>:</strong></dt>
  <dd><%= @purchase.supplier_account.name unless @purchase.supplier_account.nil? %></dd>
  <% unless @purchase.discount.blank? %>
	  <dt><strong><%= t 'subtotal' %>:</strong></dt>
	  <dd><%= @purchase.shopping_cart_id %></dd>
	  <dt><strong><%= model_class.human_attribute_name(:discount) %>:</strong></dt>
	  <% if @purchase.discount_type == 'absolute' %>
	 	<dd><%= number_to_currency @purchase.discount, precision: 0 %></dd>
	  <% elsif @purchase.discount_type == 'percentage' %>
	 	<dd><%= @purchase.discount %>%</dd>
	  <% end %>
  <% end %>
  <dt><strong><%= model_class.human_attribute_name(:paid_amount) %>:</strong></dt>
  <dd><%= number_to_currency @purchase.paid_amount, precision: 0 %></dd>
  <dt><strong><%= model_class.human_attribute_name(:customer_id) %>:</strong></dt>
  <dd><%= @purchase.customer.name unless @purchase.customer.nil? %></dd>
  <dt><strong><%= model_class.human_attribute_name(:user_id) %>:</strong></dt>
  <dd><%= @purchase.user.email unless @purchase.user.nil? %></dd>
  <dt><strong><%= model_class.human_attribute_name(:invoice_number) %>:</strong></dt>
  <dd><%= @purchase.invoice_number %></dd>
</dl>

<div class="form-actions">
  <%= link_to t('print_detail'), supplier_account_purchase_path(supplier_account_id: @supplier_account.id, id: @purchase.id, :format => 'pdf'), 
				:class => 'btn btn-primary', target: '_blank' %>
  <%= link_to t('print_change_ticket'), supplier_account_purchase_change_ticket_path(supplier_account_id: @supplier_account.id, :format => 'pdf'), 
				:class => 'btn btn-primary', target: '_blank'  %>
  <%= link_to t('view_all_purchases'), supplier_account_purchases_path(supplier_account_id: @supplier_account.id), :class => 'btn'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_supplier_account_purchase_path(supplier_account_id: @supplier_account.id, id: @purchase.id), :class => 'btn' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              supplier_account_purchase_path(supplier_account_id: @supplier_account.id, id: @purchase.id),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
</div>
